{
  "type": "blocked",
  "projector": {
    "description": "Handles blocked events tracking",
    "func": "projector.project",
    "tests": []
  },
  "job": "process_unblocked",
  "commands": {
    "list": {
      "description": "Lists all blocked events",
      "func": "list.execute",
      "tests": [
        {
          "given": {
            "db": {"state": {"blocked_by_id": {
              "dep_1": [{"event_id": "evt_1", "reason": "Missing dependency"}],
              "dep_2": [{"event_id": "evt_2", "reason": "Invalid signature"}]
            }}},
            "params": {}
          },
          "then": {
            "return": {"api_response": {
              "blocked": [
                {"event_id": "evt_1", "blocked_by": "dep_1", "reason": "Missing dependency"},
                {"event_id": "evt_2", "blocked_by": "dep_2", "reason": "Invalid signature"}
              ]
            }}
          }
        }
      ]
    },
    "process_unblocked": {
      "description": "Process events marked as ready to unblock",
      "func": "process_unblocked.execute",
      "tests": []
    }
  }
}
