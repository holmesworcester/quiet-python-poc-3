{
  "type": "blocked",
  "projector": {
    "description": "Handles blocked events tracking",
    "func": "projector.project",
    "tests": []
  },
  "job": "process_unblocked",
  "commands": {
    "list": {
      "description": "Lists all blocked events",
      "func": "list.execute",
      "tests": [
        {
          "given": {
            "db": {"tables": {
              "recheck_queue": [
                {"event_id": "evt_1", "reason_type": "Missing dependency", "available_at_ms": 1},
                {"event_id": "evt_2", "reason_type": "Invalid signature", "available_at_ms": 2}
              ]
            }},
            "params": {}
          },
          "then": {
            "return": {"api_response": {
              "blocked": [
                {"event_id": "evt_1", "blocked_by": null, "reason": "Missing dependency"},
                {"event_id": "evt_2", "blocked_by": null, "reason": "Invalid signature"}
              ]
            }}
          }
        }
      ]
    },
    "process_unblocked": {
      "description": "Process events marked as ready to unblock",
      "func": "process_unblocked.execute",
      "tests": []
    }
  }
}
